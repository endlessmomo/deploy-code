## 💻배포 과정

---


### 1. 최상위 루트 프로젝트 경로에 Dorkerfile을 생성한다.
~~~docker
FROM adoptopenjdk/openjdk11 

CMD ["./mvnw", "clean", "package"]

ARG JAR_FILE_PATH=target/*.jar

COPY ${JAR_FILE_PATH} app.jar

ENTRYPOINT ["java", "-jar", "app.jar"]
~~~

| 명령               | 명령 설명           | 상세 설명                                                                                             |
|------------------|-----------------|---------------------------------------------------------------------------------------------------|
| **FROM**         | 베이스 이미지 지정      | 생성하고자 하는 이미지의 기초 이미지                                                                              |
| **RUN**          | 명령 실행           | Shell 형식으로 명령, 도커 이미지가 생성될 때 딱 한번 수행된다.                                                           
| **CMD**          | 컨테이너 실행 명령     | Shell 형식의 명령, 해당 이미지를 컨테이너로 띄울 때, <br>디폴트 커맨드나 ENTRYPOINT 명령으로 지정된 커맨드에 디폴트로 넘길 파라미터를 지정할 때 사용한다. 
| **ARG**          | Dokerfile 내부 변수 | 이미지 빌드 시에만 사용되는 변수 지정                                                                             
| **COPY**         | 파일 복사           | 이미지에 파일 복사                                                                                        
| **ENTRYPOINT**   | 컨테이너 실행 명령      | 컨테이너 시작 시 실행할 커맨드 명령어 <br>  컨테이너가 시작될 때 필수적으로 특정 명령을 실행해야 하는 경우                                                                       |


### 2. properties 의 데이터베이스 경로를 제대로 설정했는지 확인해보자.
 **필자는 아래와 같은 경로로 지정해줬다.**  
 url: jdbc:mysql://10.0.2.6:3306/mission 

### 3. gradlew clean과 build를 절차적으로 수행하여  .jar파일을 생성한다.

### 4. 이미지를 빌드하여, 도커 허브에 push한다.
~~~bash
  docker build -tag [도커허브계정명]/[이미지명]:[버전] .
  docker push [도커허브계정명]/[이미지명]:[버전]
  
  # 만약 다른 환경에 설치할 경우 일정 시간이 지난 후, 
  # 본인 이미지가 제대로 업로드 됐는지 확인
  docker search [도커허브계정명]
~~~
> **런과 CMD의 차이**
> 
> `RUN` 은 이미지를 빌드할 때 실행되는 것이고,  
> `CMD` 는 이미 만들어진(빌드 완료된) 이미지로부터 도커 컨테이너를 시작할 때 실행되는 것이다.
